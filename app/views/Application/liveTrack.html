<!DOCTYPE html>

<html lang="&{play.i18n.Lang.get()}">
<head>
<title>${play.i18n.Messages.get('views.application.schedule.title')}</title>

<link rel="icon" type="image/png" href="@{'/public/images/favicon.png'}">

<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">

<!-- Bootstrap -->
<!-- Bootstrap has been customized to modify a variable :
         Point at which the navbar becomes uncollapsed => @grid-float-breakpoint = @screen-md-min
         (http://getbootstrap.com/customize/)
    -->
<link rel="stylesheet"
	href="@{'/public/bootstrap/3.3.7/css/bootstrap.min.css'}">
<link rel="stylesheet"
	href="@{'/public/bootstrap/3.3.7/css/bootstrap-theme.min.css'}">

<!-- Google Fonts -->
<link href="https://fonts.googleapis.com/css?family=Muli:300,400,600,700" rel="stylesheet"> 

<!-- Font awesome -->
<script
    defer
    src="https://use.fontawesome.com/releases/v5.8.1/js/all.js"
    integrity="sha384-g5uSoOSBd7KkhAMlnQILrecXvzst9TdC09/VM+pjDTCM+1il8RHz5fKANTFFb+gQ"
    crossorigin="anonymous"
></script>

<!-- Custom -->
<link rel="stylesheet" href="@{'/public/stylesheets/live.css'}">

#{get 'moreStyles' /}
</head>
<body>

<div id="js-target" class="live"></div>

    <div class="live__currentDate">
        <span id="js-live-currentDate"></span>
    </div>

	<!-- Custom JS -->
	<script>
        var showTrack = "${track}";

        var tracks = {
            #{list tracks, as: 'track'}
                "${track.title}": [
                    #{list track.talks, as: 'talk'}
                        {
                            "title": "${talk.getTitle().jsonEscape()}",
                            "description": "${talk.getDescription().jsonEscape()}", 
                            "start": ${talk.slot?.startDate?.time ?: "null"}, 
                            "end": ${talk.slot?.endDate?.time ?: "null"},
                            #{if talk.theme}
                                "theme": "${talk.theme}",
                                "themeColor": "${talk.theme.color.code}",
                            #{/if}
                            #{if talk.type}
                                "type": "${talk.type}",
                            #{/if}
                            #{if talk.level}
                                "level": "&{'views.application.schedule.level.' + talk.level.code}",
                            #{/if}
                            #{if talk.language}
                                "language": "${talk.language}",
                            #{/if}
                            "track": "${track.title.jsonEscape()}", 
                            "speakers": [
                            #{list talk.speakers, as: 'speaker'}
                                {
                                    "name": "${speaker.firstName.jsonEscape()} ${speaker.lastName.jsonEscape()}",
                                    "photo": "@{Application.speakerPhoto(speaker.id)}"
                                }
                                #{if !speaker_isLast},#{/if}
                            #{/list}
                            ]
                        }
                        #{if !talk_isLast},#{/if}
                    #{/list}
                ]
                #{if !track_isLast},#{/if} 
            #{/list}
        };
    </script>

	<script src="@{'/public/javascripts/live.js'}"></script>

</body>
</html>
