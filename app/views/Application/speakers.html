#{extends 'main.html' /}
#{set title:'Orateurs' /}

#{if user}
	<a href="@{Speakers.blank()}">add</a>
	<br/>
#{/if}

<h1>Orateurs</h1>

<table class="lines">
    <thead>
        <tr>
            <th>&nbsp;</th>
            <th>Orateur</th>
            <th>Information</th>
            <th>PrÃ©sentations</th>
        </tr>
    </thead>
	<tbody>
		#{list items: speakers, as: 'speaker'}
			<tr class="${speaker_isLast ? 'last' : ''}">
				<th>
				 <a href="@{Application.speaker(speaker.id)}"><img src="@{Application.speakerPhoto(speaker.id)}" width="100"/></a>
				</th>
				<td>
					<span class="label">Nom:</span> <a href="@{Application.speaker(speaker.id)}">${speaker.firstName} ${speaker.lastName}</a>
					#{if user}
						<br/>
						<a href="@{Speakers.show(speaker.id)}">edit</a>
					#{/if}
					#{if speaker.title}
						<br/>
						<span class="label">Titre:</span> ${speaker.title}
					#{/if}
                </td>
				<td>
					#{if speaker.company}
						<span class="label">Compagnie:</span> 
						#{if speaker.companyURL}
							<a href="${speaker.companyURL}">${speaker.company}</a>
						#{/if}
						#{else}
							${speaker.company}
						#{/else}
                        <br/>
					#{/if}
					#{if speaker.twitterAccount}
						<span class="label">Twitter:</span> <a href="http://twitter.com/${speaker.twitterAccount}">@${speaker.twitterAccount}</a>
                        <br/>
					#{/if}
					#{if speaker.blogURL}
						<span class="label">Blog:</span> <a href="${speaker.blogURL}">${speaker.blogURL}</a>
					#{/if}
                </td>
				<td>
					<ul>
						#{list items: speaker.talks, as: 'talk'}
							<li>
								<a href="@{Application.talk(talk.id)}">${talk.title}</a>
							</li>
						#{/list}
					</ul>
				</td>
			</tr>
		#{/list}
	</tbody>
</table>
