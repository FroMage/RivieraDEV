#{extends 'CRUD/layout.html' /}
#{set title:messages.get('crud.blank.title', type.modelName) /}

<div id="crudBlank" class="${type.name}">

    <h2 id="crudBlankTitle">&{'crud.blank.title', type.modelName}</h2>

    <div class="objectForm">
    #{form action:@create(), enctype:'multipart/form-data'}
        #{crud.form fields: [
         'title',
         'publishedDate',
         'contents',
        ]}
            #{crud.custom 'publishedDate'}
                #{field 'object.publishedDate'}
                    %{
                        value_date = params[field.name] ?: '';
                        value_time = params[field.name+"_time"] ?: ''; 
                    }%
                    <label for="${field.id}">&{'publishedDate'}</label>
                    <input id="${field.id}" class="${field.errorClass} date" type="text" name="${field.name}" value="${value_date}" size="10" />
                    <input id="${field.id}_time" class="${field.errorClass} time" type="text" name="${field.name}_time" value="${value_time}" size="10" />
                    #{ifError field.name}
                        <span class="error">${field.error}</span>
                    #{/ifError}
                #{/field}
            #{/crud.custom}
        
        #{/crud.form}
        <p class="crudButtons">
            <input type="submit" name="_save" value="&{'crud.save', type.modelName}" />
            <input type="submit" name="_saveAndContinue" value="&{'crud.saveAndContinue', type.modelName}" />
            <input type="submit" name="_saveAndAddAnother" value="&{'crud.saveAndAddAnother', type.modelName}" />
        </p>
    #{/form}
    </div>

    <script type="text/javascript">
        jQuery(".date").calendricalDate({});
        jQuery(".time").calendricalTime({isoTime: true, timeInterval: 15, minTime: {hour: 9, minute: 0}});
    </script>

</div>